{
  "fixture_version": "1.0.0",
  "description": "Golden fixture for deep-research-report response with content fidelity metadata",
  "test_cases": [
    {
      "name": "full_fidelity_report",
      "description": "Complete report with full content fidelity (no token management applied)",
      "response": {
        "success": true,
        "data": {
          "report": "# Research Report\n\n## Summary\n\nThis is a sample research report with full content fidelity.\n\n## Key Findings\n\n1. Finding one\n2. Finding two\n\n## Sources\n\n- Source A\n- Source B",
          "research_id": "deepres-abc123def456",
          "phase": "synthesis",
          "iteration": 1,
          "total_sources": 10,
          "total_findings": 5
        },
        "error": null,
        "meta": {
          "version": "response-v2",
          "request_id": "req_test123",
          "content_fidelity_schema_version": "1.0",
          "content_fidelity": "full",
          "dropped_content_ids": [],
          "content_archive_hashes": {},
          "warning_details": []
        }
      }
    },
    {
      "name": "partial_fidelity_report",
      "description": "Report with partial content fidelity due to token limits",
      "response": {
        "success": true,
        "data": {
          "report": "# Research Report (Summarized)\n\n## Summary\n\nThis report has been summarized due to token constraints.\n\n## Key Findings (5 of 12 shown)\n\n1. Primary finding\n2. Secondary finding\n3. Tertiary finding\n4. Quaternary finding\n5. Quinary finding",
          "research_id": "deepres-xyz789ghi012",
          "phase": "synthesis",
          "iteration": 2,
          "total_sources": 25,
          "total_findings": 12,
          "returned_findings": 5
        },
        "error": null,
        "meta": {
          "version": "response-v2",
          "request_id": "req_test456",
          "content_fidelity_schema_version": "1.0",
          "content_fidelity": "partial",
          "dropped_content_ids": [
            "finding-006",
            "finding-007",
            "finding-008",
            "finding-009",
            "finding-010",
            "finding-011",
            "finding-012"
          ],
          "content_archive_hashes": {
            "findings-archive": "sha256:e3b0c44298fc1c149afbf4c8996fb924"
          },
          "warnings": [
            "7 findings omitted due to token limits"
          ],
          "warning_details": [
            {
              "code": "CONTENT_DROPPED",
              "severity": "info",
              "message": "7 findings omitted due to token limits",
              "context": {
                "dropped_count": 7,
                "total_count": 12,
                "reason": "token_budget_exceeded"
              }
            }
          ]
        }
      }
    },
    {
      "name": "summary_fidelity_report",
      "description": "Report with summary fidelity - condensed content representation",
      "response": {
        "success": true,
        "data": {
          "report": "# Research Summary\n\nThe research examined 50 sources across 3 iterations and identified 30 key findings in the areas of technology, methodology, and applications.",
          "research_id": "deepres-sum123abc789",
          "phase": "synthesis",
          "iteration": 3,
          "total_sources": 50,
          "total_findings": 30,
          "returned_findings": 0
        },
        "error": null,
        "meta": {
          "version": "response-v2",
          "request_id": "req_test789",
          "content_fidelity_schema_version": "1.0",
          "content_fidelity": "summary",
          "dropped_content_ids": [
            "finding-001",
            "finding-002",
            "finding-003"
          ],
          "content_archive_hashes": {
            "full-report": "sha256:abc123def456789012345678901234567890",
            "findings-archive": "sha256:def456abc789012345678901234567890123"
          },
          "warnings": [
            "Report summarized due to extreme token constraints",
            "30 findings available in archive"
          ],
          "warning_details": [
            {
              "code": "PRIORITY_SUMMARIZED",
              "severity": "info",
              "message": "Report summarized due to extreme token constraints",
              "context": {
                "original_token_count": 45000,
                "summarized_token_count": 500,
                "compression_ratio": 0.011
              }
            },
            {
              "code": "CONTENT_DROPPED",
              "severity": "info",
              "message": "30 findings available in archive",
              "context": {
                "dropped_count": 30,
                "archive_available": true
              }
            }
          ]
        }
      }
    },
    {
      "name": "token_management_disabled",
      "description": "Report when token_management_enabled=false - still includes fidelity fields with defaults",
      "response": {
        "success": true,
        "data": {
          "report": "# Complete Research Report\n\n## Full content without any token management applied\n\nAll sources and findings are included in their entirety.",
          "research_id": "deepres-notok123456",
          "phase": "synthesis",
          "iteration": 1,
          "total_sources": 8,
          "total_findings": 4
        },
        "error": null,
        "meta": {
          "version": "response-v2",
          "request_id": "req_notok123",
          "content_fidelity_schema_version": "1.0",
          "content_fidelity": "full",
          "dropped_content_ids": [],
          "content_archive_hashes": {},
          "warning_details": []
        }
      }
    },
    {
      "name": "report_with_state_migration_warning",
      "description": "Report loaded from older state version with migration recovery",
      "response": {
        "success": true,
        "data": {
          "report": "# Recovered Research Report\n\nThis report was loaded from a previous schema version.",
          "research_id": "deepres-migrated789",
          "phase": "synthesis",
          "iteration": 1,
          "total_sources": 5,
          "total_findings": 3
        },
        "error": null,
        "meta": {
          "version": "response-v2",
          "request_id": "req_migrated",
          "content_fidelity_schema_version": "1.0",
          "content_fidelity": "full",
          "dropped_content_ids": [],
          "content_archive_hashes": {},
          "warnings": [
            "State recovered from v0 migration"
          ],
          "warning_details": [
            {
              "code": "STATE_MIGRATION_RECOVERED",
              "severity": "info",
              "message": "State recovered from v0 migration failure",
              "context": {
                "original_version": 0,
                "target_version": 1,
                "recovered_at": "2026-01-24T12:00:00Z"
              }
            }
          ]
        }
      }
    }
  ],
  "schema_notes": {
    "content_fidelity_schema_version": "Always '1.0' for v1 schema. SHOULD be present when content_fidelity is not 'full'.",
    "content_fidelity": "One of: 'full', 'partial', 'summary', 'reference_only'. Defaults to 'full' when no token management applied.",
    "dropped_content_ids": "Array of content item IDs that were omitted. Empty array when nothing dropped.",
    "content_archive_hashes": "Map of archive identifiers to content hashes. Empty object when no archives.",
    "warning_details": "Array of structured warning objects. Empty array when no warnings.",
    "backwards_compatibility": "All fidelity fields MUST be present in response even when token_management_enabled=false to ensure consistent schema."
  }
}
