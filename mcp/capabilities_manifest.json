{
  "schema_version": "1.1.0",
  "server": {
    "name": "foundry-mcp",
    "version": "0.5.1",
    "description": "MCP server for SDD spec management with tools, resources, and prompts"
  },
  "tools": {
    "unified": [
      {
        "name": "health",
        "description": "Health checks and diagnostics.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "liveness",
              "readiness",
              "check"
            ],
            "description": "Health action to run"
          },
          {
            "name": "include_details",
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "When action=check, include dependency details"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: health action=liveness",
            "input": {
              "action": "liveness"
            }
          }
        ]
      },
      {
        "name": "plan",
        "description": "Planning helpers (create/list/review plans).",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "create",
              "list",
              "review"
            ],
            "description": "Planning action"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: plan action=create",
            "input": {
              "action": "create"
            }
          }
        ]
      },
      {
        "name": "pr",
        "description": "PR workflows with spec context.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "create",
              "get-context"
            ],
            "description": "PR workflow action"
          },
          {
            "name": "spec_id",
            "type": "string",
            "required": false,
            "description": "Spec ID for context/PR creation"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: pr action=create",
            "input": {
              "action": "create"
            }
          }
        ]
      },
      {
        "name": "error",
        "description": "Error collection query and cleanup.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "list",
              "get",
              "stats",
              "patterns",
              "cleanup"
            ],
            "description": "Error action"
          },
          {
            "name": "error_id",
            "type": "string",
            "required": false,
            "description": "Error ID (required for action=get)"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: error action=list",
            "input": {
              "action": "list"
            }
          }
        ]
      },
      {
        "name": "metrics",
        "description": "Metrics query, stats, and cleanup.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "query",
              "list",
              "summary",
              "stats",
              "cleanup"
            ],
            "description": "Metrics action"
          },
          {
            "name": "metric_name",
            "type": "string",
            "required": false,
            "description": "Metric name (required for some actions)"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: metrics action=query",
            "input": {
              "action": "query"
            }
          }
        ]
      },
      {
        "name": "journal",
        "description": "Journaling add/list helpers.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "add",
              "list",
              "list-unjournaled"
            ],
            "description": "Journal action"
          },
          {
            "name": "spec_id",
            "type": "string",
            "required": false,
            "description": "Spec ID filter"
          },
          {
            "name": "task_id",
            "type": "string",
            "required": false,
            "description": "Task ID filter"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: journal action=add",
            "input": {
              "action": "add"
            }
          }
        ]
      },
      {
        "name": "authoring",
        "description": "Spec authoring mutations (create/templates/frontmatter, phases, assumptions, revisions).",
        "auth_required": false,
        "rate_limit": null,
        "feature_flag": "authoring_tools",
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "spec-create",
              "spec-template",
              "spec-update-frontmatter",
              "phase-add",
              "phase-add-bulk",
              "phase-remove",
              "phase-move",
              "phase-template",
              "phase-update-metadata",
              "assumption-add",
              "assumption-list",
              "revision-add",
              "spec-find-replace",
              "spec-rollback",
              "intake-add",
              "intake-list",
              "intake-dismiss"
            ],
            "description": "Authoring action"
          },
          {
            "name": "spec_id",
            "type": "string",
            "required": false,
            "description": "Target spec ID (required for most actions)"
          },
          {
            "name": "name",
            "type": "string",
            "required": false,
            "description": "Spec name (required for action=spec-create)"
          },
          {
            "name": "template",
            "type": "string",
            "required": false,
            "description": "Template name (used by spec-create/spec-template)"
          },
          {
            "name": "category",
            "type": "string",
            "required": false,
            "description": "Default task category for spec-create"
          },
          {
            "name": "template_action",
            "type": "string",
            "required": false,
            "description": "Template operation (list|show|apply) for action=spec-template"
          },
          {
            "name": "template_name",
            "type": "string",
            "required": false,
            "description": "Template name for template_action=show|apply"
          },
          {
            "name": "key",
            "type": "string",
            "required": false,
            "description": "Frontmatter key (required for action=spec-update-frontmatter)"
          },
          {
            "name": "value",
            "type": "string",
            "required": false,
            "description": "Frontmatter value (required for action=spec-update-frontmatter)"
          },
          {
            "name": "dry_run",
            "type": "boolean",
            "required": false,
            "default": false,
            "description": "Preview changes without saving"
          },
          {
            "name": "path",
            "type": "string",
            "required": false,
            "description": "Workspace path override"
          },
          {
            "name": "phase_id",
            "type": "string",
            "required": false,
            "description": "Phase identifier for phase-move/phase-update-metadata actions"
          },
          {
            "name": "position",
            "type": "integer",
            "required": false,
            "description": "Target position (1-based) for phase-move action"
          },
          {
            "name": "link_previous",
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Update phase blockers to maintain sequential dependencies after move"
          },
          {
            "name": "estimated_hours",
            "type": "number",
            "required": false,
            "description": "Estimated hours for phase-update-metadata action (must be >= 0)"
          },
          {
            "name": "description",
            "type": "string",
            "required": false,
            "description": "Description text for phase-update-metadata action"
          },
          {
            "name": "purpose",
            "type": "string",
            "required": false,
            "description": "Purpose text for phase-update-metadata action"
          },
          {
            "name": "find",
            "type": "string",
            "required": false,
            "description": "Text or regex pattern to find for spec-find-replace action"
          },
          {
            "name": "replace",
            "type": "string",
            "required": false,
            "description": "Replacement text for spec-find-replace action (empty string to delete matches)"
          },
          {
            "name": "scope",
            "type": "string",
            "required": false,
            "default": "all",
            "enum": ["all", "titles", "descriptions"],
            "description": "Scope of find-replace: titles only, descriptions only, or all"
          },
          {
            "name": "use_regex",
            "type": "boolean",
            "required": false,
            "default": false,
            "description": "Treat find pattern as regex for spec-find-replace"
          },
          {
            "name": "case_sensitive",
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Case-sensitive matching for spec-find-replace"
          },
          {
            "name": "version",
            "type": "string",
            "required": false,
            "description": "Backup timestamp for spec-rollback action (use spec history to list available)"
          },
          {
            "name": "title",
            "type": "string",
            "required": false,
            "constraints": {
              "min_length": 1,
              "max_length": 140
            },
            "description": "Title for intake-add action (required, 1-140 characters)"
          },
          {
            "name": "priority",
            "type": "string",
            "required": false,
            "default": "p2",
            "enum": ["p0", "p1", "p2", "p3", "p4"],
            "description": "Priority level for intake-add (p0=highest, p4=lowest, default p2)"
          },
          {
            "name": "tags",
            "type": "array",
            "required": false,
            "default": [],
            "constraints": {
              "max_items": 20,
              "item_max_length": 32,
              "item_pattern": "^[a-z0-9_-]+$"
            },
            "description": "Tags for intake-add (max 20 items, each 1-32 chars, lowercase alphanumeric with hyphens/underscores)"
          },
          {
            "name": "source",
            "type": "string",
            "required": false,
            "constraints": {
              "max_length": 100
            },
            "description": "Source context for intake-add (e.g., 'slack', 'email', max 100 chars)"
          },
          {
            "name": "requester",
            "type": "string",
            "required": false,
            "constraints": {
              "max_length": 100
            },
            "description": "Requester name for intake-add (max 100 chars)"
          },
          {
            "name": "idempotency_key",
            "type": "string",
            "required": false,
            "constraints": {
              "max_length": 64
            },
            "description": "Idempotency key for intake-add to prevent duplicates (max 64 chars)"
          },
          {
            "name": "limit",
            "type": "integer",
            "required": false,
            "default": 50,
            "constraints": {
              "min": 1,
              "max": 200
            },
            "description": "Maximum items to return for intake-list (1-200, default 50)"
          },
          {
            "name": "intake_id",
            "type": "string",
            "required": false,
            "constraints": {
              "pattern": "^intake-[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
            },
            "description": "Intake item ID for intake-dismiss (required, format: intake-<uuid>)"
          },
          {
            "name": "reason",
            "type": "string",
            "required": false,
            "constraints": {
              "max_length": 200
            },
            "description": "Reason for dismissing intake item (max 200 chars)"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified",
          "specs",
          "authoring"
        ],
        "examples": [
          {
            "description": "Create a new spec from template",
            "input": {
              "action": "spec-create",
              "name": "my-new-feature",
              "template": "feature"
            }
          },
          {
            "description": "Move phase to first position",
            "input": {
              "action": "phase-move",
              "spec_id": "my-feature-spec-001",
              "phase_id": "phase-3",
              "position": 1
            }
          },
          {
            "description": "Update phase metadata",
            "input": {
              "action": "phase-update-metadata",
              "spec_id": "my-feature-spec-001",
              "phase_id": "phase-1",
              "estimated_hours": 4.5,
              "description": "Core implementation phase",
              "purpose": "Build foundational components"
            }
          },
          {
            "description": "Find and replace text across spec (dry run)",
            "input": {
              "action": "spec-find-replace",
              "spec_id": "my-feature-spec-001",
              "find": "old-service",
              "replace": "new-service",
              "scope": "all",
              "dry_run": true
            }
          },
          {
            "description": "Find and replace with regex",
            "input": {
              "action": "spec-find-replace",
              "spec_id": "my-feature-spec-001",
              "find": "v[0-9]+\\.[0-9]+",
              "replace": "v2.0",
              "use_regex": true
            }
          },
          {
            "description": "Rollback spec to previous backup",
            "input": {
              "action": "spec-rollback",
              "spec_id": "my-feature-spec-001",
              "version": "20251227T120000"
            }
          },
          {
            "description": "Capture a new work idea in the bikelane intake queue",
            "input": {
              "action": "intake-add",
              "title": "Add dark mode support",
              "description": "Users have requested dark mode for reduced eye strain",
              "priority": "p2",
              "tags": ["ui", "accessibility"],
              "source": "user-feedback",
              "requester": "product-team"
            }
          },
          {
            "description": "List pending intake items awaiting triage",
            "input": {
              "action": "intake-list",
              "limit": 20
            }
          },
          {
            "description": "List intake items with pagination cursor",
            "input": {
              "action": "intake-list",
              "cursor": "eyJvZmZzZXQiOiAyMH0=",
              "limit": 50
            }
          },
          {
            "description": "Dismiss an intake item from the triage queue",
            "input": {
              "action": "intake-dismiss",
              "intake_id": "intake-12345678-1234-1234-1234-123456789012",
              "reason": "Duplicate of existing feature request"
            }
          }
        ]
      },
      {
        "name": "provider",
        "description": "LLM provider discovery and execution.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "list",
              "status",
              "execute"
            ],
            "description": "Provider action"
          },
          {
            "name": "provider_id",
            "type": "string",
            "required": false,
            "description": "Provider identifier (required for some actions)"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: provider action=list",
            "input": {
              "action": "list"
            }
          }
        ]
      },
      {
        "name": "environment",
        "description": "Workspace init + environment verification.",
        "auth_required": false,
        "rate_limit": null,
        "feature_flag": "environment_tools",
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "init",
              "verify-env",
              "verify-toolchain",
              "setup",
              "detect"
            ],
            "description": "Environment action"
          },
          {
            "name": "path",
            "type": "string",
            "required": false,
            "description": "Workspace path (default: current)"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: environment action=init",
            "input": {
              "action": "init"
            }
          }
        ]
      },
      {
        "name": "lifecycle",
        "description": "Spec lifecycle transitions.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "move",
              "activate",
              "complete",
              "archive",
              "state"
            ],
            "description": "Lifecycle action"
          },
          {
            "name": "spec_id",
            "type": "string",
            "required": false,
            "description": "Target spec ID"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: lifecycle action=move",
            "input": {
              "action": "move"
            }
          }
        ]
      },
      {
        "name": "verification",
        "description": "Verification definition + execution.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "add",
              "execute"
            ],
            "description": "Verification action"
          },
          {
            "name": "spec_id",
            "type": "string",
            "required": false,
            "description": "Target spec ID"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: verification action=add",
            "input": {
              "action": "add"
            }
          }
        ]
      },
      {
        "name": "task",
        "description": "Task preparation, mutation, and listing.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "prepare",
              "next",
              "info",
              "check-deps",
              "start",
              "complete",
              "update-status",
              "block",
              "unblock",
              "list-blocked",
              "add",
              "remove",
              "update-estimate",
              "update-metadata",
              "progress",
              "list",
              "query",
              "hierarchy",
              "move",
              "add-dependency",
              "remove-dependency",
              "add-requirement",
              "metadata-batch",
              "fix-verification-types"
            ],
            "description": "Task action"
          },
          {
            "name": "spec_id",
            "type": "string",
            "required": false,
            "description": "Target spec ID (required for most actions)"
          },
          {
            "name": "task_id",
            "type": "string",
            "required": false,
            "description": "Target task ID (required for some actions)"
          },
          {
            "name": "dry_run",
            "type": "boolean",
            "required": false,
            "default": false,
            "description": "Preview changes without saving (supported for update-estimate/update-metadata/add/remove/move/add-dependency/remove-dependency/add-requirement)"
          },
          {
            "name": "parent",
            "type": "string",
            "required": false,
            "description": "Target parent ID for move action (phase or task ID)"
          },
          {
            "name": "position",
            "type": "integer",
            "required": false,
            "description": "Target position (1-based) within children list for move action"
          },
          {
            "name": "target_id",
            "type": "string",
            "required": false,
            "description": "Target task ID for dependency actions (add-dependency/remove-dependency)"
          },
          {
            "name": "dependency_type",
            "type": "string",
            "required": false,
            "default": "blocks",
            "enum": ["blocks", "blocked_by", "depends"],
            "description": "Type of dependency relationship"
          },
          {
            "name": "requirement_type",
            "type": "string",
            "required": false,
            "enum": ["acceptance", "technical", "constraint"],
            "description": "Type of requirement for add-requirement action"
          },
          {
            "name": "text",
            "type": "string",
            "required": false,
            "description": "Requirement text for add-requirement action"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified",
          "tasks",
          "dependencies"
        ],
        "examples": [
          {
            "description": "Get next recommended task",
            "input": {
              "action": "prepare",
              "spec_id": "my-feature-spec-001"
            }
          },
          {
            "description": "Move task to new position within same parent",
            "input": {
              "action": "move",
              "spec_id": "my-feature-spec-001",
              "task_id": "task-1-3",
              "position": 1
            }
          },
          {
            "description": "Move task to different phase",
            "input": {
              "action": "move",
              "spec_id": "my-feature-spec-001",
              "task_id": "task-1-3",
              "parent": "phase-2",
              "position": 1
            }
          },
          {
            "description": "Add blocking dependency between tasks",
            "input": {
              "action": "add-dependency",
              "spec_id": "my-feature-spec-001",
              "task_id": "task-2-1",
              "target_id": "task-1-3",
              "dependency_type": "blocks"
            }
          },
          {
            "description": "Remove a dependency relationship",
            "input": {
              "action": "remove-dependency",
              "spec_id": "my-feature-spec-001",
              "task_id": "task-2-1",
              "target_id": "task-1-3",
              "dependency_type": "blocks"
            }
          },
          {
            "description": "Add acceptance requirement to task",
            "input": {
              "action": "add-requirement",
              "spec_id": "my-feature-spec-001",
              "task_id": "task-1-2",
              "requirement_type": "acceptance",
              "text": "All unit tests must pass with 100% coverage"
            }
          }
        ]
      },
      {
        "name": "spec",
        "description": "Spec discovery, validation, and analysis.",
        "auth_required": false,
        "rate_limit": null,
        "feature_flag": "spec_helpers",
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "find",
              "get",
              "list",
              "validate",
              "fix",
              "stats",
              "validate-fix",
              "analyze",
              "analyze-deps",
              "schema",
              "diff",
              "history",
              "completeness-check",
              "duplicate-detection"
            ],
            "description": "Spec action"
          },
          {
            "name": "spec_id",
            "type": "string",
            "required": false,
            "description": "Target spec ID (required for most actions)"
          },
          {
            "name": "workspace",
            "type": "string",
            "required": false,
            "description": "Workspace path override"
          },
          {
            "name": "status",
            "type": "string",
            "required": false,
            "default": "all",
            "enum": ["all", "pending", "active", "completed", "archived"],
            "description": "Filter specs by status for list action"
          },
          {
            "name": "include_progress",
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Include progress info in list results"
          },
          {
            "name": "cursor",
            "type": "string",
            "required": false,
            "description": "Pagination cursor for list/history actions"
          },
          {
            "name": "limit",
            "type": "integer",
            "required": false,
            "description": "Maximum results to return (for list/history/diff/duplicate-detection)"
          },
          {
            "name": "target",
            "type": "string",
            "required": false,
            "description": "Comparison target for diff action (backup timestamp or spec_id)"
          },
          {
            "name": "threshold",
            "type": "number",
            "required": false,
            "default": 0.8,
            "description": "Similarity threshold (0.0-1.0) for duplicate-detection action"
          },
          {
            "name": "scope",
            "type": "string",
            "required": false,
            "default": "titles",
            "enum": ["titles", "descriptions", "all"],
            "description": "What to compare for duplicate-detection action"
          },
          {
            "name": "dry_run",
            "type": "boolean",
            "required": false,
            "default": false,
            "description": "Preview changes without saving (for fix action)"
          },
          {
            "name": "auto_fix",
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Automatically fix validation issues"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified",
          "specs",
          "validation"
        ],
        "examples": [
          {
            "description": "Find a spec by ID",
            "input": {
              "action": "find",
              "spec_id": "my-feature-spec-001"
            }
          },
          {
            "description": "List active specs",
            "input": {
              "action": "list",
              "status": "active"
            }
          },
          {
            "description": "Diff spec against latest backup",
            "input": {
              "action": "diff",
              "spec_id": "my-feature-spec-001"
            }
          },
          {
            "description": "Diff spec against specific backup",
            "input": {
              "action": "diff",
              "spec_id": "my-feature-spec-001",
              "target": "20251227T120000"
            }
          },
          {
            "description": "View spec history (backups and revisions)",
            "input": {
              "action": "history",
              "spec_id": "my-feature-spec-001"
            }
          },
          {
            "description": "Check spec completeness score",
            "input": {
              "action": "completeness-check",
              "spec_id": "my-feature-spec-001"
            }
          },
          {
            "description": "Detect duplicate tasks",
            "input": {
              "action": "duplicate-detection",
              "spec_id": "my-feature-spec-001",
              "threshold": 0.7
            }
          }
        ]
      },
      {
        "name": "review",
        "description": "LLM-assisted review workflows.",
        "auth_required": false,
        "rate_limit": null,
        "feature_flag": "llm_tools",
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "spec",
              "fidelity",
              "parse-feedback",
              "list-tools",
              "list-plan-tools"
            ],
            "description": "Review action"
          },
          {
            "name": "spec_id",
            "type": "string",
            "required": false,
            "description": "Target spec ID (required for spec/fidelity actions)"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: review action=spec",
            "input": {
              "action": "spec"
            }
          }
        ]
      },
      {
        "name": "code",
        "description": "Repo-local code navigation helpers.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "find-class",
              "find-function",
              "callers",
              "callees",
              "trace",
              "impact"
            ],
            "description": "Code navigation action"
          },
          {
            "name": "symbol",
            "type": "string",
            "required": false,
            "description": "Symbol name (required for most actions)"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: code action=find-class",
            "input": {
              "action": "find-class"
            }
          }
        ]
      },
      {
        "name": "server",
        "description": "Tool discovery, schemas, context, and capabilities.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "tools",
              "schema",
              "capabilities",
              "context",
              "llm-status"
            ],
            "description": "Server action"
          },
          {
            "name": "tool_name",
            "type": "string",
            "required": false,
            "description": "Tool name (required for action=schema)"
          },
          {
            "name": "category",
            "type": "string",
            "required": false,
            "description": "Filter tools by category (action=tools)"
          },
          {
            "name": "tag",
            "type": "string",
            "required": false,
            "description": "Filter tools by tag (action=tools)"
          },
          {
            "name": "include_deprecated",
            "type": "boolean",
            "required": false,
            "default": false
          },
          {
            "name": "cursor",
            "type": "string",
            "required": false
          },
          {
            "name": "limit",
            "type": "integer",
            "required": false,
            "default": 100
          },
          {
            "name": "include_llm",
            "type": "boolean",
            "required": false,
            "default": true
          },
          {
            "name": "include_workflow",
            "type": "boolean",
            "required": false,
            "default": true
          },
          {
            "name": "include_workspace",
            "type": "boolean",
            "required": false,
            "default": true
          },
          {
            "name": "include_capabilities",
            "type": "boolean",
            "required": false,
            "default": true
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: server action=tools",
            "input": {
              "action": "tools"
            }
          }
        ]
      },
      {
        "name": "test",
        "description": "Pytest discovery and execution.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {
            "name": "action",
            "type": "string",
            "required": true,
            "enum": [
              "run",
              "discover"
            ],
            "description": "Test action"
          },
          {
            "name": "preset",
            "type": "string",
            "required": false,
            "enum": [
              "quick",
              "unit",
              "full"
            ],
            "description": "Preset for action=run"
          }
        ],
        "version": "1.0.0",
        "deprecated": false,
        "tags": [
          "unified"
        ],
        "examples": [
          {
            "description": "Example: test action=run",
            "input": {
              "action": "run"
            }
          }
        ]
      }
    ]
  },
  "resources": [
    {
      "uri_template": "foundry://specs/",
      "description": "List all specifications",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://specs/{status}/",
      "description": "List specs by status (active, pending, completed, archived)",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://specs/{status}/{spec_id}",
      "description": "Get specific spec with full hierarchy",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://specs/{spec_id}/journal",
      "description": "Get journal entries for a spec",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://templates/",
      "description": "List available spec templates",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://templates/{template_id}",
      "description": "Get specific template",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "specs://list",
      "description": "Legacy: List all specifications",
      "auth_required": false,
      "rate_limit": null,
      "deprecated": true
    },
    {
      "uri_template": "specs://{spec_id}",
      "description": "Legacy: Get specification by ID",
      "auth_required": false,
      "rate_limit": null,
      "deprecated": true
    }
  ],
  "prompts": [
    {
      "name": "start_feature",
      "description": "Guide new feature setup with template selection",
      "parameters": [
        {
          "name": "feature_name",
          "type": "string",
          "required": true
        },
        {
          "name": "description",
          "type": "string",
          "required": false
        },
        {
          "name": "template",
          "type": "string",
          "required": false,
          "default": "feature"
        }
      ]
    },
    {
      "name": "debug_test",
      "description": "Systematic test debugging workflow",
      "parameters": [
        {
          "name": "test_name",
          "type": "string",
          "required": false
        },
        {
          "name": "error_message",
          "type": "string",
          "required": false
        },
        {
          "name": "spec_id",
          "type": "string",
          "required": false
        }
      ]
    },
    {
      "name": "complete_phase",
      "description": "Phase completion checklist and guidance",
      "parameters": [
        {
          "name": "spec_id",
          "type": "string",
          "required": true
        },
        {
          "name": "phase_id",
          "type": "string",
          "required": false
        }
      ]
    },
    {
      "name": "review_spec",
      "description": "Comprehensive spec status review",
      "parameters": [
        {
          "name": "spec_id",
          "type": "string",
          "required": true
        }
      ]
    }
  ],
  "feature_flags": {
    "_documentation": "Feature flags control gradual rollouts, A/B testing, and experimental features. See docs/mcp_best_practices/14-feature-flags.md for guidance.",
    "schema_version": "1.0.0",
    "flags": {
      "environment_tools": {
        "description": "Environment setup and verification tools for SDD workflows",
        "state": "beta",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "platform-team",
        "dependencies": [],
        "created_at": "2025-11-27T00:00:00Z",
        "expires_at": null
      },
      "env_auto_fix": {
        "description": "Automatic fix capability for environment verification issues",
        "state": "experimental",
        "default_enabled": false,
        "percentage_rollout": 0,
        "owner": "platform-team",
        "dependencies": [
          "environment_tools"
        ],
        "created_at": "2025-11-27T00:00:00Z",
        "expires_at": null
      },
      "spec_helpers": {
        "description": "Spec helper tools for discovery, validation, and analysis",
        "state": "beta",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "spec-team",
        "dependencies": [],
        "created_at": "2025-11-27T00:00:00Z",
        "expires_at": null
      },
      "authoring_tools": {
        "description": "Spec authoring tools for creating specs, managing phases and tasks, managing assumptions, and revisions",
        "state": "beta",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "spec-team",
        "dependencies": [],
        "created_at": "2025-11-27T00:00:00Z",
        "expires_at": null
      },
      "intake_tools": {
        "description": "Bikelane intake queue tools for fast work idea capture and triage (intake-add, intake-list, intake-dismiss)",
        "state": "beta",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "spec-team",
        "dependencies": ["authoring_tools"],
        "created_at": "2025-12-28T00:00:00Z",
        "expires_at": null
      },
      "llm_tools": {
        "description": "LLM-powered review tools",
        "state": "stable",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "platform-team",
        "dependencies": [],
        "created_at": "2025-11-26T00:00:00Z",
        "expires_at": null
      },
      "llm_multi_provider": {
        "description": "Multi-provider AI tool support",
        "state": "stable",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "platform-team",
        "dependencies": [],
        "created_at": "2025-11-26T00:00:00Z",
        "expires_at": null
      },
      "llm_fidelity_review": {
        "description": "AI-powered fidelity review",
        "state": "stable",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "platform-team",
        "dependencies": [],
        "created_at": "2025-11-26T00:00:00Z",
        "expires_at": null
      },
      "llm_data_only_fallback": {
        "description": "Graceful degradation when LLM unavailable",
        "state": "stable",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "platform-team",
        "dependencies": [],
        "created_at": "2025-11-26T00:00:00Z",
        "expires_at": null
      },
      "unified_tools_phase2": {
        "description": "Enable unified routers for medium tool families",
        "state": "beta",
        "default_enabled": false,
        "percentage_rollout": 0,
        "owner": "foundry-mcp core",
        "dependencies": [],
        "created_at": "2025-12-10T00:00:00Z",
        "expires_at": null
      },
      "unified_tools_phase3": {
        "description": "Enable unified routers for large tool families",
        "state": "beta",
        "default_enabled": false,
        "percentage_rollout": 0,
        "owner": "foundry-mcp core",
        "dependencies": [],
        "created_at": "2025-12-10T00:00:00Z",
        "expires_at": null
      },
      "unified_manifest": {
        "description": "Expose only the 17 unified tools for discovery/token reduction",
        "state": "beta",
        "default_enabled": false,
        "percentage_rollout": 0,
        "owner": "foundry-mcp core",
        "dependencies": [],
        "created_at": "2025-12-10T00:00:00Z",
        "expires_at": null
      }
    }
  },
  "server_capabilities": {
    "_documentation": "Server capabilities returned by capability_get for client negotiation",
    "response_version": {
      "current": "response-v2",
      "supported": [
        "response-v2"
      ],
      "description": "Response envelope contract version"
    },
    "features": {
      "pagination": {
        "supported": true,
        "default_page_size": 100,
        "max_page_size": 1000,
        "cursor_format": "opaque_base64",
        "description": "Cursor-based pagination for list operations"
      },
      "feature_flags": {
        "supported": true,
        "description": "Feature flag system for gradual rollouts"
      },
      "unified_tools": {
        "supported": true,
        "description": "Action-based unified tool surface (17 tools)",
        "tools": [
          "health",
          "plan",
          "pr",
          "error",
          "metrics",
          "journal",
          "authoring",
          "provider",
          "environment",
          "lifecycle",
          "verification",
          "task",
          "spec",
          "review",
          "code",
          "server",
          "test"
        ],
        "feature_flags": [
          "unified_manifest",
          "unified_tools_phase2",
          "unified_tools_phase3"
        ]
      },
      "environment_readiness": {
        "supported": true,
        "description": "Environment verification and workspace initialization",
        "tools": [
          "environment"
        ]
      },
      "spec_helpers": {
        "supported": true,
        "description": "Spec discovery and analysis",
        "tools": [
          "spec"
        ]
      }
    }
  }
}
