{
  "schema_version": "1.0.0",
  "server": {
    "name": "foundry-mcp",
    "version": "0.2.0",
    "description": "MCP server for SDD spec management with tools, resources, and prompts"
  },
  "tools": {
    "spec_management": [
      {
        "name": "list_specs",
        "description": "List all specification files with optional filtering",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "get_spec",
        "description": "Get a specification by ID",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "get_spec_hierarchy",
        "description": "Get the full hierarchy of a specification",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "get_task",
        "description": "Get a specific task from a specification",
        "auth_required": false,
        "rate_limit": null
      }
    ],
    "query_tools": [
      {
        "name": "task_query",
        "description": "Query tasks with filtering by status, type, parent",
        "auth_required": false,
        "rate_limit": null
      }
    ],
    "task_tools": [
      {
        "name": "task_prepare",
        "description": "Prepare task with full context for implementation",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_next",
        "description": "Find next actionable task",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_info",
        "description": "Get detailed task information",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_check_deps",
        "description": "Check dependency status for a task",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_update_status",
        "description": "Update task status",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_complete",
        "description": "Mark task complete with journal entry",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_start",
        "description": "Start working on a task",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_progress",
        "description": "Get spec/phase progress summary",
        "auth_required": false,
        "rate_limit": null
      }
    ],
    "validation_tools": [
      {
        "name": "spec_validate",
        "description": "Validate spec and return structured diagnostics",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "spec_fix",
        "description": "Apply auto-fixes with dry-run support",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "spec_stats",
        "description": "Get comprehensive spec statistics",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "spec_validate_fix",
        "description": "Combined validation and fix in one operation",
        "auth_required": false,
        "rate_limit": null
      }
    ],
    "journal_tools": [
      {
        "name": "journal_add",
        "description": "Add journal entries with optional task association",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "journal_list",
        "description": "Retrieve journal entries with filtering",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_block",
        "description": "Mark tasks as blocked with metadata",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_unblock",
        "description": "Unblock tasks and track resolution",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_list_blocked",
        "description": "List all blocked tasks",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "journal_list_unjournaled",
        "description": "Find tasks needing journal entries",
        "auth_required": false,
        "rate_limit": null
      }
    ],
    "rendering_tools": [
      {
        "name": "spec_render",
        "description": "Render spec to markdown with mode options",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "spec_render_progress",
        "description": "ASCII progress bars for spec and phases",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "task_list",
        "description": "Flat task list with filtering",
        "auth_required": false,
        "rate_limit": null
      }
    ],
    "lifecycle_tools": [
      {
        "name": "spec_lifecycle_move",
        "description": "Move spec between folders",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "spec_lifecycle_activate",
        "description": "Activate pending spec",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "spec_lifecycle_complete",
        "description": "Mark spec completed",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "spec_lifecycle_archive",
        "description": "Archive spec",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "spec_lifecycle_state",
        "description": "Get lifecycle state and transition eligibility",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "spec_list_by_folder",
        "description": "List specs by folder",
        "auth_required": false,
        "rate_limit": null
      }
    ],
    "docs_tools": [
      {
        "name": "code_find_class",
        "description": "Find class in documentation",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "code_find_function",
        "description": "Find function in documentation",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "code_trace_calls",
        "description": "Trace call graph with direction and depth",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "code_impact_analysis",
        "description": "Analyze change impact",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "code_get_callers",
        "description": "Get caller functions",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "code_get_callees",
        "description": "Get callee functions",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "doc_stats",
        "description": "Get documentation statistics",
        "auth_required": false,
        "rate_limit": null
      }
    ],
    "testing_tools": [
      {
        "name": "test_run",
        "description": "Full-featured test execution with presets",
        "auth_required": false,
        "rate_limit": {
          "requests_per_minute": 10,
          "reason": "Resource-intensive operation"
        }
      },
      {
        "name": "test_discover",
        "description": "Test discovery without execution",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "test_presets",
        "description": "List available test presets",
        "auth_required": false,
        "rate_limit": null
      },
      {
        "name": "test_run_quick",
        "description": "Quick test preset shortcut",
        "auth_required": false,
        "rate_limit": {
          "requests_per_minute": 10,
          "reason": "Resource-intensive operation"
        }
      },
      {
        "name": "test_run_unit",
        "description": "Unit test preset shortcut",
        "auth_required": false,
        "rate_limit": {
          "requests_per_minute": 10,
          "reason": "Resource-intensive operation"
        }
      }
    ],
    "environment_tools": [
      {
        "name": "sdd-verify-toolchain",
        "description": "Verify local CLI/toolchain availability including git, python, node, and SDD CLI",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {"name": "tools", "type": "array", "required": false, "description": "Specific tools to check (default: all)"},
          {"name": "verbose", "type": "boolean", "required": false, "default": false}
        ]
      },
      {
        "name": "sdd-init-workspace",
        "description": "Bootstrap working directory with specs folders, config files, and git integration",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {"name": "path", "type": "string", "required": false, "description": "Target directory (default: current)"},
          {"name": "force", "type": "boolean", "required": false, "default": false, "description": "Overwrite existing config"},
          {"name": "git_integration", "type": "boolean", "required": false, "default": true}
        ]
      },
      {
        "name": "sdd-detect-topology",
        "description": "Auto-detect repository layout for specs and documentation directories",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {"name": "path", "type": "string", "required": false, "description": "Root directory to scan (default: current)"},
          {"name": "depth", "type": "integer", "required": false, "default": 3, "description": "Max directory depth to scan"}
        ]
      },
      {
        "name": "sdd-verify-environment",
        "description": "Validate OS packages, runtime versions, and credential availability",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {"name": "checks", "type": "array", "required": false, "description": "Specific checks to run (os, runtime, credentials)"},
          {"name": "fix", "type": "boolean", "required": false, "default": false, "description": "Attempt to fix issues"}
        ]
      }
    ],
    "discovery_tools": [
      {
        "name": "tool_list",
        "description": "List available tools with filtering by category, tag, and deprecation status. Returns paginated results.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {"name": "category", "type": "string", "required": false, "description": "Filter by tool category"},
          {"name": "tag", "type": "string", "required": false, "description": "Filter by semantic tag"},
          {"name": "include_deprecated", "type": "boolean", "required": false, "default": false},
          {"name": "cursor", "type": "string", "required": false, "description": "Pagination cursor"},
          {"name": "limit", "type": "integer", "required": false, "default": 100, "max": 1000}
        ]
      },
      {
        "name": "tool_get_schema",
        "description": "Get detailed JSON Schema for a specific tool, including examples, rate limits, and related tools.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {"name": "tool_name", "type": "string", "required": true, "description": "Name of the tool to get schema for"}
        ]
      },
      {
        "name": "capability_get",
        "description": "Get server capabilities for client negotiation including response version, streaming, batch operations, and feature flags.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": []
      },
      {
        "name": "capability_negotiate",
        "description": "Negotiate capabilities with the server, requesting specific response versions and features.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": [
          {"name": "requested_version", "type": "string", "required": false, "description": "Desired response version"},
          {"name": "requested_features", "type": "string", "required": false, "description": "Comma-separated feature list"}
        ]
      },
      {
        "name": "tool_list_categories",
        "description": "List tool categories with tool counts for browsing available functionality.",
        "auth_required": false,
        "rate_limit": null,
        "parameters": []
      }
    ]
  },
  "resources": [
    {
      "uri_template": "foundry://specs/",
      "description": "List all specifications",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://specs/{status}/",
      "description": "List specs by status (active, pending, completed, archived)",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://specs/{status}/{spec_id}",
      "description": "Get specific spec with full hierarchy",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://specs/{spec_id}/journal",
      "description": "Get journal entries for a spec",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://templates/",
      "description": "List available spec templates",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "foundry://templates/{template_id}",
      "description": "Get specific template",
      "auth_required": false,
      "rate_limit": null
    },
    {
      "uri_template": "specs://list",
      "description": "Legacy: List all specifications",
      "auth_required": false,
      "rate_limit": null,
      "deprecated": true
    },
    {
      "uri_template": "specs://{spec_id}",
      "description": "Legacy: Get specification by ID",
      "auth_required": false,
      "rate_limit": null,
      "deprecated": true
    }
  ],
  "prompts": [
    {
      "name": "start_feature",
      "description": "Guide new feature setup with template selection",
      "parameters": [
        {"name": "feature_name", "type": "string", "required": true},
        {"name": "description", "type": "string", "required": false},
        {"name": "template", "type": "string", "required": false, "default": "feature"}
      ]
    },
    {
      "name": "debug_test",
      "description": "Systematic test debugging workflow",
      "parameters": [
        {"name": "test_name", "type": "string", "required": false},
        {"name": "error_message", "type": "string", "required": false},
        {"name": "spec_id", "type": "string", "required": false}
      ]
    },
    {
      "name": "complete_phase",
      "description": "Phase completion checklist and guidance",
      "parameters": [
        {"name": "spec_id", "type": "string", "required": true},
        {"name": "phase_id", "type": "string", "required": false}
      ]
    },
    {
      "name": "review_spec",
      "description": "Comprehensive spec status review",
      "parameters": [
        {"name": "spec_id", "type": "string", "required": true}
      ]
    }
  ],
  "feature_flags": {
    "_documentation": "Feature flags control gradual rollouts, A/B testing, and experimental features. See docs/mcp_best_practices/14-feature-flags.md for guidance.",
    "schema_version": "1.0.0",
    "flags": {
      "streaming_responses": {
        "description": "Enable streaming for large response payloads",
        "state": "experimental",
        "default_enabled": false,
        "percentage_rollout": 0,
        "owner": "platform-team",
        "dependencies": [],
        "created_at": "2025-11-26T00:00:00Z",
        "expires_at": null
      },
      "batch_operations": {
        "description": "Support for batch tool invocations",
        "state": "beta",
        "default_enabled": false,
        "percentage_rollout": 25,
        "owner": "api-team",
        "dependencies": [],
        "created_at": "2025-11-26T00:00:00Z",
        "expires_at": "2026-06-01T00:00:00Z"
      },
      "response_v3": {
        "description": "New response envelope format with enhanced metadata",
        "state": "experimental",
        "default_enabled": false,
        "percentage_rollout": 0,
        "owner": "platform-team",
        "dependencies": [],
        "created_at": "2025-11-26T00:00:00Z",
        "expires_at": null
      },
      "enhanced_validation": {
        "description": "Enhanced spec validation with additional checks",
        "state": "stable",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "spec-team",
        "dependencies": [],
        "created_at": "2025-10-01T00:00:00Z",
        "expires_at": null
      },
      "environment_tools": {
        "description": "Environment setup and verification tools for SDD workflows",
        "state": "beta",
        "default_enabled": true,
        "percentage_rollout": 100,
        "owner": "platform-team",
        "dependencies": [],
        "created_at": "2025-11-27T00:00:00Z",
        "expires_at": null
      },
      "env_auto_fix": {
        "description": "Automatic fix capability for environment verification issues",
        "state": "experimental",
        "default_enabled": false,
        "percentage_rollout": 0,
        "owner": "platform-team",
        "dependencies": ["environment_tools"],
        "created_at": "2025-11-27T00:00:00Z",
        "expires_at": null
      }
    },
    "lifecycle_states": {
      "experimental": {
        "description": "Early development, opt-in only, may change without notice",
        "sla": "none",
        "default_behavior": "disabled"
      },
      "beta": {
        "description": "Feature-complete but not fully validated, opt-in available",
        "sla": "limited",
        "default_behavior": "disabled"
      },
      "stable": {
        "description": "Production-ready, full SLA guarantees",
        "sla": "full",
        "default_behavior": "enabled"
      },
      "deprecated": {
        "description": "Being phased out, warns on use, will be removed",
        "sla": "maintenance-only",
        "default_behavior": "enabled-with-warning"
      }
    }
  },
  "server_capabilities": {
    "_documentation": "Server capabilities returned by capability_get for client negotiation",
    "response_version": {
      "current": "response-v2",
      "supported": ["response-v2"],
      "description": "Response envelope contract version"
    },
    "features": {
      "streaming": {
        "supported": false,
        "description": "Streaming responses for large payloads"
      },
      "batch_operations": {
        "supported": true,
        "max_batch_size": 100,
        "description": "Batch tool invocations"
      },
      "pagination": {
        "supported": true,
        "default_page_size": 100,
        "max_page_size": 1000,
        "cursor_format": "opaque_base64",
        "description": "Cursor-based pagination for list operations"
      },
      "rate_limit_headers": {
        "supported": true,
        "description": "Rate limit info in response meta"
      },
      "feature_flags": {
        "supported": true,
        "description": "Feature flag system for gradual rollouts"
      },
      "environment_readiness": {
        "supported": true,
        "description": "Environment verification and workspace initialization tools",
        "tools": ["sdd-verify-toolchain", "sdd-init-workspace", "sdd-detect-topology", "sdd-verify-environment"]
      }
    },
    "api_version": "2024-11-01"
  },
  "metadata": {
    "generated_at": "2025-11-27T14:37:00Z",
    "generator": "foundry-mcp",
    "documentation_url": "https://github.com/foundry-mcp/foundry-mcp"
  }
}
